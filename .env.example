# --- Core Runtime -------------------------------------------------------------
DRY_RUN=false
EXECUTION_MODE=atomic
ATOMIC_SEND_MODE=auto
ATOMIC_EXPIRY_MS=6000
ATOMIC_MARGIN_BPS=1.2
INITIAL_ATOMIC_MARGIN_BPS=0.4
MIN_STAGEA_MARGIN_BPS=0.3
ALLOW_STAGEB_FAIL_PROBE=false
ATOMIC_BUNDLE_MIN_EXPECTED_NET_BPS=0.5
WATCH_INTERVAL_SECONDS=2.5
ERROR_BACKOFF_SECONDS=1.0
ENV_CONFIG_PRIORITY=firestore

# --- Chain / Wallet -----------------------------------------------------------
SOLANA_RPC_URL=https://mainnet.helius-rpc.com/?api-key=YOUR_API_KEY
PRIVATE_KEY=
LIVE_MIN_BALANCE_LAMPORTS=20000000

# --- Quote / Swap / Bundle Providers -----------------------------------------
HELIUS_QUOTE_API=https://api.jup.ag/swap/v1/quote
HELIUS_API_KEY=
HELIUS_JUP_PROXY_ENABLED=false
QUOTE_DEFAULT_PARAMS_JSON={"onlyDirectRoutes": false, "restrictIntermediateTokens": false, "maxAccounts": 64}
QUOTE_INITIAL_PARAMS_JSON={"onlyDirectRoutes": false, "restrictIntermediateTokens": false, "maxAccounts": 64}
QUOTE_PLAN_PARAMS_JSON={"onlyDirectRoutes": false, "restrictIntermediateTokens": false, "maxAccounts": 48}
QUOTE_DEX_ALLOWLIST_FORWARD=["Raydium CLMM","Orca Whirlpool","Meteora DLMM","Raydium CPMM"]
QUOTE_DEX_ALLOWLIST_REVERSE=["Raydium CLMM","Orca Whirlpool","Meteora DLMM","Raydium CPMM"]
QUOTE_DEX_EXCLUDELIST=[]
QUOTE_EXPLORATION_MODE=TIER1_ONLY
QUOTE_DEX_SWEEP_TOPK=1
QUOTE_DEX_SWEEP_TOPK_MAX=1
QUOTE_DEX_SWEEP_COMBO_LIMIT=1
QUOTE_NEAR_MISS_EXPAND_BPS=999
QUOTE_MEDIAN_REQUOTE_MAX_RANGE_BPS=3.0
MAX_REQUOTE_RANGE_BPS=3.0
MIN_IMPROVEMENT_BPS=0.2
QUOTE_MAX_RPS=0.4
QUOTE_EXPLORATION_MAX_RPS=0.3
QUOTE_EXECUTION_MAX_RPS=0.15
QUOTE_CACHE_TTL_MS=1500
QUOTE_NO_ROUTES_CACHE_TTL_SECONDS=300
QUOTE_PROBE_MAX_ROUTES=50
QUOTE_PROBE_BASE_AMOUNTS_RAW=[10000000,20000000,40000000]
QUOTE_DYNAMIC_ALLOWLIST_TOPK=10
QUOTE_DYNAMIC_ALLOWLIST_GOOD_ALPHA=2.0
QUOTE_DYNAMIC_ALLOWLIST_TTL_SECONDS=300
QUOTE_DYNAMIC_ALLOWLIST_REFRESH_SECONDS=5.0
QUOTE_NEGATIVE_FALLBACK_STREAK_THRESHOLD=10
ROUTE_INSTABILITY_COOLDOWN_REQUOTE_SECONDS=15
ROUTE_INSTABILITY_COOLDOWN_PLAN_SECONDS=30
ROUTE_INSTABILITY_COOLDOWN_DECAY_REQUOTE_BPS=3.0
ROUTE_INSTABILITY_COOLDOWN_DECAY_PLAN_BPS=3.0
INITIAL_PROFIT_GATE_RELAXED_LAMPORTS=500
ENABLE_PROBE_UNCONSTRAINED=false
ENABLE_PROBE_MULTI_AMOUNT=false
ENABLE_DECAY_METRICS_LOGGING=true
ENABLE_PRIORITY_FEE_BREAKDOWN_LOGGING=true
ENABLE_STAGEA_RELAXED_GATE=true
ENABLE_INITIAL_PROFIT_GATE_RELAXED=true
ENABLE_ROUTE_INSTABILITY_COOLDOWN=true
ENABLE_LEGACY_SWAP_FALLBACK=false
JUPITER_API_KEY=
JUPITER_SWAP_API=https://api.jup.ag/swap/v1/swap
JITO_BLOCK_ENGINE_URL=https://tokyo.mainnet.block-engine.jito.wtf/api/v1/bundles,https://mainnet.block-engine.jito.wtf/api/v1/bundles
JITO_TIP_LAMPORTS_MAX=8000
JITO_TIP_LAMPORTS_RECOMMENDED=3000
JITO_TIP_SHARE=0.1

# --- Firestore ---------------------------------------------------------------
FIREBASE_CREDENTIALS=/app/credentials/firebase-service-account.json
FIRESTORE_PROJECT_ID=your-gcp-project-id
FIRESTORE_CONFIG_DOC=bots/solana-bot/config/runtime
FIRESTORE_CONFIG_LEAF_DOC_ID=runtime
FIRESTORE_SPLIT_DRY_RUN_RESULTS=true
FIRESTORE_DRY_RUN_RESULTS_SUFFIX=-dryrun
FIRESTORE_RESULTS_BOT_ID=
FIRESTORE_PUBLISH_ORDER_EXECUTION_EVENTS=false
FIRESTORE_AGGREGATE_BATCH_SIZE=20
FIRESTORE_AGGREGATE_FLUSH_INTERVAL_SECONDS=30

# --- Bot Namespace (Firestore Collections) -----------------------------------
BOT_COLLECTION=bots
BOT_ID=solana-bot
BOT_ENV=dev
BOT_RUN_ID=
BOT_RUNS_COLLECTION=runs
BOT_EVENTS_COLLECTION=events
BOT_TRADES_COLLECTION=trades
BOT_PNL_DAILY_COLLECTION=pnl_daily
BOT_METRICS_COLLECTION=metrics
BOT_METRICS_DOC_ID=runtime

# --- Redis -------------------------------------------------------------------
REDIS_URL=redis://redis:6379/0
REDIS_PORT=6379
REDIS_CONFIG_KEY=config
REDIS_HEARTBEAT_KEY=bot:heartbeat
REDIS_PRICE_PREFIX=prices
REDIS_SPREAD_PREFIX=spreads
REDIS_POSITION_KEY=position:current
REDIS_ORDER_GUARD_PREFIX=orders:guard
REDIS_ORDER_RECORD_PREFIX=orders:record
REDIS_PENDING_ATOMIC_PREFIX=pending_atomic
REDIS_RUNTIME_COUNTER_KEY=metrics:runtime:counters
REDIS_RUNTIME_SUMMARY_KEY=metrics:runtime:summary
REDIS_RATE_LIMIT_PAUSE_KEY=bot:rate_limit_pause_until
REDIS_RUNTIME_METRICS_TTL_SECONDS=172800

# --- Trading Pair -------------------------------------------------------------
PAIR_SYMBOL=SOL/USDC
PAIR_BASE_MINT=So11111111111111111111111111111111111111112
PAIR_QUOTE_MINT=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
PAIR_BASE_DECIMALS=9
PAIR_QUOTE_DECIMALS=6
PAIR_BASE_AMOUNT=300000000
PAIR_SLIPPAGE_BPS=20
BASE_AMOUNT_SWEEP_MULTIPLIERS=[1]
BASE_AMOUNT_SWEEP_CANDIDATES_RAW=[300000000]
BASE_AMOUNT_MAX_RAW=300000000

# --- Runtime Strategy Config (seed / fallback) -------------------------------
CONFIG_SCHEMA_VERSION=1
MIN_SPREAD_BPS=0.8
INITIAL_MIN_SPREAD_BPS=0.2
DEX_FEE_BPS=0
PRIORITY_FEE_MICRO_LAMPORTS=12000
PRIORITY_COMPUTE_UNITS=150000
PRIORITY_FEE_PERCENTILE=0.6
PRIORITY_FEE_MULTIPLIER=1.0
MAX_FEE_MICRO_LAMPORTS=60000
ORDER_GUARD_TTL_SECONDS=20
TRADE_ENABLED=true
MIN_EXPECTED_PROFIT_LAMPORTS=500

# --- Live Safety Guards -------------------------------------------------------
LIVE_SEND_MAX_ATTEMPTS=3
LIVE_SEND_RETRY_BACKOFF_SECONDS=0.8
LIVE_CONFIRM_TIMEOUT_SECONDS=90
LIVE_CONFIRM_POLL_INTERVAL_SECONDS=0.5
LIVE_REBUILD_MAX_ATTEMPTS=2
LIVE_PENDING_GUARD_TTL_SECONDS=120
LIVE_PENDING_RECOVERY_LIMIT=50
LIVE_PENDING_RECOVERY_INTERVAL_SECONDS=5
LIVE_EXECUTION_COOLDOWN_SECONDS=1.5
LIVE_EXECUTION_WINDOW_SECONDS=60.0
LIVE_MAX_EXECUTIONS_PER_WINDOW=6
LIVE_MAX_PENDING_ORDERS=1
LIVE_FEE_BUDGET_WINDOW_SECONDS=3600
LIVE_MAX_ESTIMATED_FEE_LAMPORTS_PER_WINDOW=200000
LIVE_ESTIMATED_BASE_FEE_LAMPORTS=5000
LIVE_MAX_CONSECUTIVE_EXECUTION_ERRORS=3
LIVE_EXECUTION_CIRCUIT_BREAKER_SECONDS=120
LIVE_DRAWDOWN_WINDOW_SECONDS=86400
LIVE_MAX_DRAWDOWN_LAMPORTS=10000000
LIVE_MAX_DRAWDOWN_PCT=2
LIVE_FINAL_STOP_EQUITY_USD=30
LIVE_DRAWDOWN_CIRCUIT_BREAKER_SECONDS=900
LIVE_REQUOTE_DECAY_WARN_BPS=1.0
LIVE_INITIAL_REQUOTE_GATE_BPS=-0.2
LIVE_REQUOTE_DECAY_GUARD_TRIGGER_BPS=12.0
LIVE_REQUOTE_DECAY_GUARD_PAUSE_SECONDS=60.0
LIVE_REQUOTE_DECAY_GUARD_REQUIRED_NET_BPS_BOOST=3.0
LIVE_SINGLE_TX_COMPACT_REQUOTE_MAX_STRATEGIES=1
LIVE_INITIAL_BREAKDOWN_LOG_INTERVAL_SECONDS=5.0
LIVE_EDGE_SUMMARY_WINDOW_SECONDS=300
LIVE_EDGE_SUMMARY_INTERVAL_SECONDS=300
LIVE_EDGE_NO_EDGE_WINDOW_SECONDS=3600
LIVE_EDGE_CONSIDER_STOP_WINDOW_SECONDS=21600
LIVE_EDGE_CONSIDER_STOP_PASS_RATE_PCT=0.1
